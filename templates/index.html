<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cars4You | AI Valuation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), 
                        url('https://images.unsplash.com/photo-1503376780353-7e6692767b70?auto=format&fit=crop&q=80&w=1920');
            background-size: cover;
            background-attachment: fixed;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .navbar-brand { font-family: 'Orbitron', sans-serif; font-size: 2rem; color: #ff4b2b !important; letter-spacing: 2px; }
        .card { background: rgba(255, 255, 255, 0.95); border: none; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        label { font-weight: bold; color: #2c3e50; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 5px; }
        .btn-predict { background: linear-gradient(to right, #ff416c, #ff4b2b); border: none; color: white; padding: 12px; font-weight: bold; border-radius: 10px; transition: 0.3s; }
        .btn-predict:hover { transform: scale(1.02); box-shadow: 0 5px 15px rgba(255,75,43,0.4); }
        .result-box { background: #1e3c72; color: white; border-radius: 15px; padding: 20px; margin-top: 20px; border-left: 5px solid #ff4b2b; }
    </style>
</head>
<body>

<nav class="navbar navbar-dark py-4">
    <div class="container justify-content-center">
        <a class="navbar-brand" href="/">Cars4You</a>
    </div>
</nav>

<div class="container pb-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card p-4">
                <form action="/predict" method="post">
                    <div class="row g-3">
                        <div class="col-md-6 border-end pe-4">
                            <h6 class="text-danger fw-bold mb-3">Vehicle Details</h6>
                            
                            <div class="mb-3">
                                <label>Brand</label>
                                <input type="text" name="brand" class="form-control" 
                                       value="{{ original_input.brand if original_input else 'Audi' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label>Model</label>
                                <input type="text" name="model" class="form-control" 
                                       value="{{ original_input.model if original_input else 'A3' }}">
                            </div>
                            
                            <div class="row">
                                <div class="col-6">
                                    <label>Year</label>
                                    <input type="number" name="year" class="form-control" 
                                           value="{{ original_input.year if original_input else '2018' }}">
                                </div>
                                <div class="col-6">
                                    <label>Fuel Type</label>
                                    <select name="fuelType" class="form-select">
                                        <option value="Petrol" {% if original_input and original_input.fuelType == 'Petrol' %}selected{% elif not original_input %}selected{% endif %}>Petrol</option>
                                        <option value="Diesel" {% if original_input and original_input.fuelType == 'Diesel' %}selected{% endif %}>Diesel</option>
                                        <option value="Hybrid" {% if original_input and original_input.fuelType == 'Hybrid' %}selected{% endif %}>Hybrid</option>
                                        <option value="Electric" {% if original_input and original_input.fuelType == 'Electric' %}selected{% endif %}>Electric</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="mt-3">
                                <label>Transmission</label>
                                <select name="transmission" class="form-select">
                                    <option value="Manual" {% if original_input and original_input.transmission == 'Manual' %}selected{% endif %}>Manual</option>
                                    <option value="Automatic" {% if original_input and original_input.transmission == 'Automatic' %}selected{% elif not original_input %}selected{% endif %}>Automatic</option>
                                    <option value="Semi-Auto" {% if original_input and original_input.transmission == 'Semi-Auto' %}selected{% endif %}>Semi-Auto</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-md-6 ps-4">
                            <h6 class="text-danger fw-bold mb-3">Condition & Specs</h6>
                            <div class="row">
                                <div class="col-6 mb-3">
                                    <label>Mileage</label>
                                    <input type="number" name="mileage" class="form-control" 
                                           value="{{ original_input.mileage if original_input else '34400' }}">
                                </div>
                                <div class="col-6 mb-3">
                                    <label>Engine Size</label>
                                    <input type="number" step="0.1" name="engineSize" class="form-control" 
                                           value="{{ original_input.engineSize if original_input else '1.4' }}">
                                </div>
                                <div class="col-6 mb-3">
                                    <label>MPG</label>
                                    <input type="number" step="0.1" name="mpg" class="form-control" 
                                           value="{{ original_input.mpg if original_input else '50' }}">
                                </div>
                                <div class="col-6 mb-3">
                                    <label>Tax (Â£)</label>
                                    <input type="number" name="tax" class="form-control" 
                                           value="{{ original_input.tax if original_input else '500' }}">
                                </div>
                                <div class="col-6 mb-3">
                                    <label>Paint Quality %</label>
                                    <input type="number" name="paint" class="form-control" 
                                           value="{{ original_input['paintQuality%'] if original_input else '90' }}">
                                </div>
                                <div class="col-6 mb-3">
                                    <label>Prev. Owners</label>
                                    <input type="number" name="owners" class="form-control" 
                                           value="{{ original_input.previousOwners if original_input else '1' }}">
                                </div>
                            </div>
                            <div class="mt-1">
                                <label>Damage History</label>
                                <select name="hasDamage" class="form-select">
                                    <option value="0" {% if original_input and original_input.hasDamage == 0.0 %}selected{% elif not original_input %}selected{% endif %}>Clean (No Damage)</option>
                                    <option value="1" {% if original_input and original_input.hasDamage == 1.0 %}selected{% endif %}>Reported Damage</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn-predict mt-4">CALCULATE VALUATION</button>
                </form>

                {% if result %}
                <div class="result-box text-center">
                    <p class="small text-uppercase mb-1" style="letter-spacing: 1px;">Market Price Estimate</p>
                    <h1 class="display-3 fw-bold m-0">{{ result }}</h1>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

</body>
</html>